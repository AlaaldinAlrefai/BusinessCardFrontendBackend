<div class="containers">
  <form (ngSubmit)="onSubmit(businessCardForm)" #businessCardForm="ngForm" class="containers mt-4 p-4 border rounded shadow-lg bg-light">
    <h2 class="mb-4 text-center text-primary">Add Your Business Card</h2>

    <div class="row">
      <!-- Name Field -->
      <div class="col-md-4 mb-3">
        <label for="name" class="form-label">Name:</label>
        <input type="text" id="name" class="form-control" [(ngModel)]="newCard.name" name="name" required />
        <div class="invalid-feedback" *ngIf="businessCardForm.controls['name']?.invalid && businessCardForm.controls['name']?.touched">
          Name is required.
        </div>
      </div>

      <!-- Gender Field -->
      <div class="col-md-4 mb-3">
        <label for="gender" class="form-label">Gender:</label>
        <select id="gender" class="form-select" [(ngModel)]="newCard.gender" name="gender" required>
          <option value="">Select Gender</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select>
        <div class="invalid-feedback" *ngIf="businessCardForm.controls['gender']?.invalid && businessCardForm.controls['gender']?.touched">
          Gender is required.
        </div>
      </div>

      <!-- Date of Birth Field -->
      <div class="col-md-4 mb-3">
        <label for="dob" class="form-label">Date of Birth:</label>
        <input type="date" id="dob" class="form-control" [(ngModel)]="newCard.dateOfBirth" name="dob" />
      </div>
    </div>

    <div class="row">
      <!-- Email Field -->
      <div class="col-md-4 mb-3">
        <label for="email" class="form-label">Email:</label>
        <input type="email" id="email" class="form-control" [(ngModel)]="newCard.email" name="email" required />
        <div class="invalid-feedback" *ngIf="businessCardForm.controls['email']?.invalid && businessCardForm.controls['email']?.touched">
          Please enter a valid email address.
        </div>
      </div>

      <!-- Phone Field -->
      <div class="col-md-4 mb-3">
        <label for="phone" class="form-label">Phone:</label>
        <input type="tel" id="phone" class="form-control" [(ngModel)]="newCard.phone" name="phone" required />
        <div class="invalid-feedback" *ngIf="businessCardForm.controls['phone']?.invalid && businessCardForm.controls['phone']?.touched">
          Phone number is required.
        </div>
      </div>

      <!-- Address Field -->
      <div class="col-md-4 mb-3">
        <label for="address" class="form-label">Address:</label>
        <textarea id="address" class="form-control" [(ngModel)]="newCard.address" name="address" rows="1"></textarea>
      </div>
    </div>

    <div class="row">
      <!-- Notes Field -->
      <div class="col-md-4 mb-3">
        <label for="notes" class="form-label">Notes:</label>
        <textarea id="notes" class="form-control" [(ngModel)]="newCard.notes" name="notes" rows="1"></textarea>
      </div>

      <!-- Upload Photo Field -->
      <div class="col-md-4 mb-3">
        <label for="photo" class="form-label">Upload Photo:</label>
        <input type="file" id="photo" #photoInput class="form-control" (change)="onFileChange($event)" accept="image/*" />
        <small class="form-text text-muted">Please upload a photo.</small>



      </div>
      <!-- Preview the uploaded image -->
<div *ngIf="newCard.photo" class="col-md-4 mb-3">
  <img [src]="'data:image/png;base64,' + newCard.photo" alt="Photo Preview" style="border-radius: 5px; max-width: 100%; margin-top: 10px;height: 100px; width: 150px;" />
</div>
    </div>


    


    <div class="text-center">
      <button type="submit" class="btn btn-primary" [disabled]="businessCardForm.invalid">Save</button>
    </div>

    <app-import-business-card></app-import-business-card>
  </form>

  <button id="buttonBack" (click)="navigateToBusinessCardList()" class="btn btn-secondary mb-3">
    <i class="bi bi-arrow-left"></i> Business Card List
  </button>
</div>
